Ext.define("Ext.ux.OptGroup.OptGroupMultiSelect",{extend:"Ext.ux.form.MultiSelect",alternateClassName:"Ext.ux.OptGroupMultiSelect",alias:["widget.optgroupmultiselectfield","widget.optgroupmultiselect"],requires:["Ext.panel.Panel","Ext.ux.OptGroup.BoundList","Ext.layout.container.Fit"],uses:["Ext.view.DragZone","Ext.view.DropZone"],layout:"fit",ddReorder:false,appendOnly:false,displayField:"text",allowBlank:true,minSelections:0,maxSelections:Number.MAX_VALUE,blankText:"This field is required",minSelectionsText:"Minimum {0} item(s) required",maxSelectionsText:"Minimum {0} item(s) required",delimiter:",",ignoreSelectChange:0,isGroupField:"",setupItems:function(){var a=this;
isGroupField=a.groupField;a.boundList=Ext.create("Ext.ux.OptGroup.BoundList",Ext.apply({deferInitialRefresh:false,border:false,multiSelect:true,store:a.store,displayField:a.displayField,disabled:a.disabled,groupField:a.groupField,onItemMouseEnter:function(b,d,c,f){return true;},onItemMouseLeave:function(b,d,c,f){return true;
},renderTpl:['<input id="{id}-inputEl" type="text" role="{role}" {inputAttrTpl} class="x-form-field x-form-text x-form-focus x-field-form-focus x-field-default-form-focus" style="position:absolute;left:-999px;opacity:0;letter-spacing: normal;word-spacing: normal;text-transform: none;text-indent: 0px;text-shadow: none;display: inline-block;text-align: start;height:0px" autocomplete="off"','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="size"> size="{size}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',"/>",'<div id="{id}-listEl" class="{baseCls}-list-ct" style="overflow:auto"></div>',"{%","var me=values.$comp, pagingToolbar=me.pagingToolbar;","if (pagingToolbar) {","pagingToolbar.ownerLayout = me.componentLayout;","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],plugins:[Ext.create("Ext.ux.form.CustomDragSelector",{})]},a.listConfig));
a.boundList.getSelectionModel().on("selectionchange",a.onSelectChange,a);return{border:true,layout:"fit",title:a.title,tbar:a.tbar,items:a.boundList};},afterRender:function(){var a=this;a.callParent();if(a.selectOnRender){++a.ignoreSelectChange;a.boundList.getSelectionModel().select(a.getRecordsForValue(a.value));
--a.ignoreSelectChange;delete a.toSelect;}if(a.ddReorder&&!a.dragGroup&&!a.dropGroup){a.dragGroup=a.dropGroup="MultiselectDD-"+Ext.id();}if(a.draggable||a.dragGroup){a.dragZone=Ext.create("Ext.view.DragZone",{view:a.boundList,ddGroup:a.dragGroup,onDrag:function(b){a.dragZone.hideProxy();},dragText:"{0} Item{1}"});
}if(a.droppable||a.dropGroup){a.dropZone=Ext.create("Ext.view.DropZone",{view:a.boundList,ddGroup:a.dropGroup,handleNodeDrop:function(h,g,b){var c=this.view,e=c.getStore(),d=h.records,f;if(c.id!=h.view.id){h.view.store.remove(d);f=e.indexOf(g);if(b==="after"){f++;}e.insert(f,d);c.getSelectionModel().select(d);
a.fireEvent("drop",a,d);if(groupBoundList!=null&&groupBoundList!="undefined"){if(groupBoundList.toField.store.getCount()>0){groupBoundList.groupToFieldItems();}else{groupBoundList.toField.boundList.refresh();}if(groupBoundList.fromField.store.getCount()>0){groupBoundList.groupFromFieldItems();}else{groupBoundList.fromField.boundList.refresh();
}}}}});}}});