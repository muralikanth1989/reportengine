Ext.define("Ext.ux.OptGroup.OptGroupItemSelectorSs",{extend:"Ext.ux.OptGroup.OptGroupMultiSelectSs",alias:["widget.optgroupitemselectorfieldSs","widget.optgroupitemselectorSs"],alternateClassName:["Ext.ux.OptGroupItemSelectorSs"],requires:["Ext.button.Button","Ext.ux.OptGroup.OptGroupMultiSelectSs"],hideNavIcons:false,buttons:["top","up","add","remove","down","bottom"],buttonsText:{top:"Move to Top",up:"Move Up",add:"Add to Selected",remove:"Remove from Selected",down:"Move Down",bottom:"Move to Bottom"},groupBoundList:"",initComponent:function(){var a=this;
groupBoundList=a;a.ddGroup=a.id+"-dd";a.callParent();a.bindStore(a.store);},getScrollMultiselect:function(e){var c=this.toField.getStore().getCount();getParentHeight=Ext.get(e.id).getHeight();getParentWidth=Ext.get(e.id).getWidth();fieldID=Ext.getCmp(e.id).getComponent(0).getComponent(0).id;var a=Ext.getCmp(e.id).getComponent(0).id;
var b=Ext.getCmp(a).getHeight()-28;var d=Ext.getCmp(e.id).getStore().getCount();if(c==0){$("#"+this.toField.id+" .x-boundlist-outer-ct").css({"width":getParentWidth+"px","overflow":"hidden"});}Ext.get(e.id).select(".x-boundlist-outer-ct").setHeight(b);$("#"+fieldID+" .x-boundlist-outer-ct").css({"width":getParentWidth+"px","overflow":"auto"});
$("#"+fieldID+" .x-boundlist-list-ct").css({"height":"auto","overflow":"hidden"});$("#"+fieldID+" .x-boundlist-outer-ct").jScrollPane();},createList:function(b){var a=this;return Ext.create("Ext.ux.OptGroup.OptGroupMultiSelectSs",{submitValue:false,flex:1,title:b,store:{model:a.store.model,data:[]},displayField:a.displayField,groupField:a.groupField,disabled:a.disabled,listeners:{boundList:{scope:a,itemdblclick:a.onItemDblClick,drop:a.syncValue}}});
},setupItems:function(){var a=this;a.fromField=a.createList(a.fromTitle);a.toField=a.createList(a.toTitle);return{border:false,layout:{type:"hbox",align:"stretch"},items:[a.fromField,{xtype:"container",margins:"0 4",width:24,layout:{type:"vbox",pack:"center"},items:a.createButtons()},a.toField]};},createButtons:function(){var b=this,a=[];
if(!b.hideNavIcons){Ext.Array.forEach(b.buttons,function(c){a.push({xtype:"button",listeners:{"afterrender":function(){Ext.create("Ext.tip.ToolTip",{target:this.id,anchor:"top",cls:"yellowTip",trackMouse:true,html:b.buttonsText[c]});}},handler:b["on"+Ext.String.capitalize(c)+"BtnClick"],cls:Ext.baseCSSPrefix+"form-itemselector-btn",iconCls:Ext.baseCSSPrefix+"form-itemselector-"+c,navBtn:true,width:16,height:16,padding:0,scope:b,margin:"6 4 0 4"});
});}return a;},getSelections:function(b){var a=b.getStore();return Ext.Array.sort(b.getSelectionModel().getSelection(),function(d,c){d=a.indexOf(d);c=a.indexOf(c);if(d<c){return -1;}else{if(d>c){return 1;}}return 0;});},onTopBtnClick:function(){var c=this.toField.boundList,a=c.getStore(),b=this.getSelections(c);
a.suspendEvents();a.remove(b,true);a.insert(0,b);a.resumeEvents();c.refresh();this.syncValue();c.getSelectionModel().select(b);},onBottomBtnClick:function(){var c=this.toField.boundList,a=c.getStore(),b=this.getSelections(c);a.suspendEvents();a.remove(b,true);a.add(b);a.resumeEvents();c.refresh();this.syncValue();
c.getSelectionModel().select(b);},onUpBtnClick:function(){var f=this.toField.boundList,b=f.getStore(),e=this.getSelections(f),g,d=0,a=e.length,c=0;b.suspendEvents();for(;d<a;++d,c++){g=e[d];c=Math.max(c,b.indexOf(g)-1);b.remove(g,true);b.insert(c,g);}b.resumeEvents();f.refresh();this.syncValue();f.getSelectionModel().select(e);
},groupFromFieldItems:function(){var p=this;var h="";if(isGroupField!="undefined"&&Ext.isArray(isGroupField)){h=isGroupField[0];}else{h=isGroupField;}var n=this.fromField.boundList,q=n.getStore(),f=this.getSelections(n),d,g=0,m=f.length,l=0;q.suspendEvents();for(var o=0;o<q.getCount();o++){var a=q.getAt(o).get(h);
for(var e=o+1;e<q.getCount();e++){var k=q.getAt(e).get(h);if(k.toLowerCase()==a.toLowerCase()){var c=q.getAt(e);var b=q.getAt(o+1);p.fromField.store.insert(o+1,c);p.fromField.store.insert(e,b);o++;}}}q.resumeEvents();n.refresh();n.getSelectionModel().select(f);},groupToFieldItems:function(){var r=this;
var k="";if(isGroupField!="undefined"&&Ext.isArray(isGroupField)){k=isGroupField[0];}else{k=isGroupField;}var p=this.toField.boundList,s=p.getStore(),g=this.getSelections(p),d,h=0,n=g.length,m=0;s.suspendEvents();for(var q=0;q<s.getCount();q++){var a=s.getAt(q).get(k);for(var f=q+1;f<s.getCount();f++){var l=s.getAt(f).get(k);
if(l.toLowerCase()==a.toLowerCase()){try{var c=s.getAt(f);var b=s.getAt(q+1);r.toField.store.insert(q+1,c);r.toField.store.insert(f,b);q++;}catch(o){}}}}s.resumeEvents();p.refresh();p.getSelectionModel().select(g);},onDownBtnClick:function(){var e=this.toField.boundList,a=e.getStore(),d=this.getSelections(e),f,c=d.length-1,b=a.getCount()-1;
a.suspendEvents();for(;c>-1;--c,b--){f=d[c];b=Math.min(b,a.indexOf(f)+1);a.remove(f,true);a.insert(b,f);}a.resumeEvents();e.refresh();this.syncValue();e.getSelectionModel().select(d);},onAddBtnClick:function(){var c=this,b=c.getSelections(c.fromField.boundList);c.moveRec(true,b);c.toField.boundList.getSelectionModel().select(b);
c.groupToFieldItems();c.fromField.boundList.refresh();var a=Ext.getCmp("wsdlOperation");if(!Ext.isEmpty(a)&&a!=undefined){if(b.length>0){appDesc.disassociate();}}},onRemoveBtnClick:function(){var c=this,b=c.getSelections(c.toField.boundList);c.moveRec(false,b);c.fromField.boundList.getSelectionModel().select(b);
c.groupFromFieldItems();c.toField.boundList.refresh();var a=Ext.getCmp("wsdlOperation");if(!Ext.isEmpty(a)&&a!=undefined){if(b.length>0){appDesc.changeElement();}}},moveRec:function(f,e){var c=this,g=c.fromField,a=c.toField,b=f?g.store:a.store,d=f?a.store:g.store;b.suspendEvents();d.suspendEvents();b.remove(e);
d.add(e);b.resumeEvents();d.resumeEvents();g.boundList.refresh();a.boundList.refresh();c.syncValue();},syncValue:function(){var a=this;a.mixins.field.setValue.call(a,a.setupValue(a.toField.store.getRange()));},onItemDblClick:function(b,f){var c=Ext.getCmp("wsdlOperation");var e=false;if(!Ext.isEmpty(c)&&c!=undefined){var d=this,a=d.getSelections(d.fromField.boundList);
if(a.length>0){e=true;}}this.moveRec(b===this.fromField.boundList,f);var c=Ext.getCmp("wsdlOperation");if(!Ext.isEmpty(c)&&c!=undefined){if(e){appDesc.disassociate();}else{appDesc.changeElement();}}},setValue:function(f){var d=this,g=d.fromField,a=d.toField,b=g.store,e=a.store,c;if(!d.fromStorePopulated){d.fromField.store.on({load:Ext.Function.bind(d.setValue,d,[f]),single:true});
return;}f=d.setupValue(f);d.mixins.field.setValue.call(d,f);c=d.getRecordsForValue(f);b.suspendEvents();e.suspendEvents();b.removeAll();e.removeAll();d.populateFromStore(d.store);Ext.Array.forEach(c,function(h){if(b.indexOf(h)>-1){b.remove(h);}e.add(h);});b.resumeEvents();e.resumeEvents();Ext.suspendLayouts();
g.boundList.refresh();a.boundList.refresh();Ext.resumeLayouts(true);},onBindStore:function(a,b){var c=this;if(c.fromField){c.fromField.store.removeAll();c.toField.store.removeAll();if(a.getCount()){c.populateFromStore(a);}else{c.store.on("load",c.populateFromStore,c);}}},populateFromStore:function(a){var b=this.fromField.store;
this.fromStorePopulated=true;b.add(a.getRange());b.fireEvent("load",b);},onEnable:function(){var a=this;a.callParent();a.fromField.enable();a.toField.enable();Ext.Array.forEach(a.query("[navBtn]"),function(b){b.enable();});},onDisable:function(){var a=this;a.callParent();a.fromField.disable();a.toField.disable();
Ext.Array.forEach(a.query("[navBtn]"),function(b){b.disable();});},onDestroy:function(){this.bindStore(null);this.callParent();}});